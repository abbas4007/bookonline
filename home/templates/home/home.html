{% extends 'base.html' %}
{% load static %}
<html lang="fa" dir="rtl">
{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فروشگاه من</title>

    <style>
        @font-face {
            font-family: 'Tanha';
            src: url('{% static "fonts/Tanha-FD.woff2" %}') format('woff2');
        }
        * { font-family: 'Tanha', sans-serif !important; box-sizing: border-box; }
        body { background: #f8f9fa; margin: 0; }
        .container { max-width: 1300px; margin: 0 auto; padding: 0 15px; }

        /* فرم جستجوی تمیز و کوچیک */
        .search-box {
            text-align: center;
            margin: 30px 0 50px;
        }
        .search-box input {
            width: 100%;
            max-width: 500px;
            padding: 15px 20px;
            border: 2px solid #007bff;
            border-radius: 50px;
            font-size: 18px;
            outline: none;
        }
        .search-box button {
            padding: 15px 30px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50px;
            margin-top: 15px;
            cursor: pointer;
            font-size: 18px;
        }

        /* گرید محصولات — دقیقاً مثل دیجی‌کالا */
        .grid_product {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            justify-content: center;
        }
        .item_grid_product {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: 0.3s;
        }
        .item_grid_product:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        .img_product img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        .caption_item_product {
            padding: 15px;
            text-align: center;
        }
        .title_product {
            font-size: 19px;
            margin: 10px 0;
            color: #222;
        }
        .text-product {
            color: #555;
            font-size: 14px;
            height: 60px;
            overflow: hidden;
        }
        .price_product {
            font-size: 22px;
            font-weight: bold;
            color: #e74c3c;
            margin: 15px 0;
        }
        .add_to_cart {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        .add_to_cart:hover { background: #219653; }

        /* وقتی هیچ محصولی نیست */
        .no-product {
            text-align: center;
            padding: 80px 20px;
            color: #777;
            font-size: 22px;
        }

    </style>
</head>
<body>
<div class="container">

    <!-- فرم جستجو -->
    <div class="search-box">
        <form method="GET" action="{% url 'home:home' %}">
            <input
                type="text"
                name="q"
                placeholder="جستجوی محصول..."
                value="{{ query|default:'' }}"
            >
            <button type="submit">جستجو</button>
        </form>
        {% if query %}
            <p style="margin-top: 20px; color: #555;">
                نتایج برای: <strong>“{{ query }}”</strong>
            </p>
        {% endif %}
    </div>

    <!-- لیست محصولات -->
    {% if products %}
        <div class="grid_product">
            {% for product in products %}
            <a href="{% url 'home:product_detail' product.slug %}" style="text-decoration:none; color:inherit;">
                <div class="item_grid_product">
                    <div class="img_product">
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    </div>
                    <div class="caption_item_product">
                        <h5 class="title_product">{{ product.name }}</h5>
                        <p class="text-product">{{ product.description|truncatewords:12|safe }}</p>
                        <div class="price_product">{{ product.price }} تومان</div>
                        <button class="add_to_cart">اضافه به سبد خرید</button>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-product">
            هیچ محصولی با این نام پیدا نشد
        </div>
    {% endif %}

</div>
</body>



</html>
{% endblock %}